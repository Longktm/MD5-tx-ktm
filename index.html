<!DOCTYPE html><html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H·ªá Th·ªëng T√†i X·ªâu Hacker</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #fff; padding: 20px; }
    h1 { font-size: 32px; color: #0f0; }
    textarea, button, select, label { font-size: 20px; margin-top: 10px; }
    textarea { width: 100%; height: 100px; }
    button { padding: 10px 20px; margin: 5px; }
    .result { margin-top: 20px; font-size: 24px; }
    .alert { color: yellow; }
    .feedback { margin-top: 10px; }
    .history { margin-top: 30px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>PH√ÇN T√çCH T√ÄI X·ªàU - AI HACKER</h1>
  <textarea id="md5Input" placeholder="D√°n m√£ MD5 t·∫°i ƒë√¢y..."></textarea><br>
  <button onclick="analyze()">Ph√¢n t√≠ch</button>
  <div class="result" id="result"></div>
  <div class="feedback" id="feedback"></div>
  <div class="history" id="history"></div>  <script>
    let db = JSON.parse(localStorage.getItem('tx_db') || '[]');

    function extractFeatures(md5) {
      let f = (md5.match(/[fF]/g) || []).length;
      let d = (md5.match(/[dD]/g) || []).length;
      let lastChar = md5.trim().slice(-1);
      return { f, d, lastChar };
    }

    function getPrediction({ f, d, lastChar }) {
      let score = 0;
      if (f > d) score += 1;
      if (d > f) score -= 1;
      if (/[0-7a-f]/i.test(lastChar)) score += 1; else score -= 1;

      let confidence = Math.min(Math.abs(score) / 3, 1);
      let prediction = score >= 0 ? 'T√†i' : 'X·ªâu';
      return { prediction, confidence };
    }

    function learn(md5, trueLabel) {
      let f = extractFeatures(md5);
      db.push({ md5, ...f, label: trueLabel });
      localStorage.setItem('tx_db', JSON.stringify(db));
    }

    function analyze() {
      let md5 = document.getElementById('md5Input').value.trim();
      if (md5.length !== 32) {
        document.getElementById('result').innerHTML = '‚ö†Ô∏è M√£ MD5 kh√¥ng h·ª£p l·ªá';
        return;
      }
      let features = extractFeatures(md5);
      let { prediction, confidence } = getPrediction(features);
      let warning = confidence < 0.7 ? '<span class="alert">‚ö†Ô∏è Kh√¥ng ch·∫Øc ch·∫Øn</span>' : '';

      document.getElementById('result').innerHTML =
        `üëâ <b>K·∫øt qu·∫£ d·ª± ƒëo√°n:</b> ${prediction} (ƒê·ªô tin c·∫≠y: ${(confidence * 100).toFixed(1)}%) ${warning}`;

      document.getElementById('feedback').innerHTML = `
        <label>S·ª≠a n·∫øu sai:</label>
        <input type="checkbox" id="fixTai"> T√†i
        <input type="checkbox" id="fixXiu"> X·ªâu
        <button onclick="saveResult('${md5}')">L∆∞u k·∫øt qu·∫£</button>
      `;

      renderHistory();
    }

    function saveResult(md5) {
      let label = document.getElementById('fixTai').checked ? 'T√†i' : (document.getElementById('fixXiu').checked ? 'X·ªâu' : null);
      if (!label) {
        alert('H√£y ch·ªçn k·∫øt qu·∫£ ƒë√∫ng l√† T√†i hay X·ªâu');
        return;
      }
      learn(md5, label);
      analyze();
    }

    function renderHistory() {
      let recent = db.slice(-10).reverse();
      document.getElementById('history').innerHTML = '<b>L·ªãch s·ª≠ g·∫ßn ƒë√¢y:</b><br>' +
        recent.map(e => `${e.md5} ‚Üí ${e.label}`).join('<br>');
    }

    renderHistory();
  </script></body>
</html>

<!DOCTYPE html><html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dự đoán Tài/Xỉu từ MD5</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    textarea, input, button { padding: 10px; font-size: 16px; margin-top: 10px; width: 100%; }
    .result { margin-top: 20px; font-weight: bold; }
    .history { margin-top: 30px; background: white; padding: 10px; border-radius: 8px; }
    .history-item { border-bottom: 1px solid #ccc; padding: 5px 0; }
  </style>
</head>
<body>
  <h2>Phân tích MD5 đoán Tài/Xỉu</h2>
  <textarea id="md5Input" rows="4" placeholder="Nhập mã MD5, mỗi dòng một mã (vd: e5c6...|tài hoặc chỉ e5c6...) "></textarea>
  <button onclick="handleSubmit()">Phân tích & Lưu mã</button>
  <div class="result" id="result"></div>  <div class="history">
    <h3>Lịch sử đã lưu</h3>
    <div id="historyList"></div>
  </div>  <script>
    // Dữ liệu đã học trước (mã và kết quả thực tế)
    let dataset = [
      { md5: "506530a31d8db150c0c11ce6a9427e70", result: "tài" },
      { md5: "2782645bdd0c8db9848353abe0804117", result: "tài" },
      { md5: "2acf33061de4c180b1ddb25abbadb968", result: "xỉu" },
      { md5: "a4a613d7c94c9ee7418016676398a005", result: "tài" },
      { md5: "8ac81d8c2ca2275cf5ab31ade10176c6", result: "tài" },
      { md5: "e1d0b832d7944465898ead0c25efe579", result: "xỉu" },
      { md5: "5aaf09ad6fe983e0ae57112551fd3a7d", result: "tài" },
      { md5: "6d3cb4d214750e7dbee3c2ee5e8599aa", result: "xỉu" },
      { md5: "c1c9f9f6042bfea1993d33ecc288f6d6", result: "xỉu" },
      { md5: "2d0979d6d2aa1cebc76539892d550729", result: "xỉu" },
      { md5: "6cefb870008a5f9c107ed2836f1ca30c", result: "xỉu" }
    ];

    // Thêm dữ liệu đã lưu trong localStorage nếu có
    if (localStorage.getItem("md5Data")) {
      try {
        dataset = [...dataset, ...JSON.parse(localStorage.getItem("md5Data"))];
      } catch (e) {
        console.error("Không đọc được dữ liệu lưu trữ cũ.");
      }
    }

    function countLetters(md5) {
      const first16 = md5.slice(0, 16).toLowerCase();
      let counts = { a: 0, b: 0, c: 0, d: 0, e: 0, f: 0 };
      for (let char of first16) {
        if (counts.hasOwnProperty(char)) counts[char]++;
      }
      return counts;
    }

    function predict(md5) {
      const counts = countLetters(md5);
      // Ví dụ phân tích: nếu tổng a+b+d > c+e+f thì là tài
      const left = counts.a + counts.b + counts.d;
      const right = counts.c + counts.e + counts.f;
      return left >= right ? "tài" : "xỉu";
    }

    function handleSubmit() {
      const input = document.getElementById("md5Input").value.trim();
      const lines = input.split("\n");
      let results = [];
      let newEntries = [];

      for (let line of lines) {
        let parts = line.split("|");
        let md5 = parts[0].trim();
        let real = parts[1]?.trim();
        if (md5.length !== 32) continue;

        let guess = predict(md5);
        results.push(`${md5} → Dự đoán: ${guess}${real ? ", Thực tế: " + real : ""}`);

        // Nếu có thực tế, lưu lại vào localStorage
        if (real === "tài" || real === "xỉu") {
          newEntries.push({ md5, result: real });
        }
      }

      if (newEntries.length > 0) {
        let old = JSON.parse(localStorage.getItem("md5Data") || "[]");
        let combined = [...old, ...newEntries];
        localStorage.setItem("md5Data", JSON.stringify(combined));
        updateHistory();
      }

      document.getElementById("result").innerText = results.join("\n");
    }

    function updateHistory() {
      let list = document.getElementById("historyList");
      let stored = JSON.parse(localStorage.getItem("md5Data") || "[]");
      list.innerHTML = stored.map(x => `<div class='history-item'>${x.md5} → ${x.result}</div>`).join("");
    }

    updateHistory();
  </script></body>
</html> 

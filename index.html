<!DOCTYPE html><html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KTM AI T√†i X·ªâu - Hacker Style</title>
  <style>
    body { font-family: monospace; background: #000; color: #0f0; padding: 10px; }
    h1 { color: #0f0; font-size: 24px; text-align: center; }
    textarea, input[type=file] { width: 100%; background: #111; color: #0f0; border: 1px solid #0f0; padding: 8px; font-size: 16px; }
    button { background: #0f0; color: #000; padding: 10px; margin: 5px 0; border: none; font-weight: bold; cursor: pointer; width: 100%; }
    .result, .log, .chat { margin-top: 10px; background: #111; padding: 10px; white-space: pre-wrap; border: 1px solid #0f0; height: 150px; overflow-y: auto; }
    label { display: block; margin-top: 5px; }
  </style>
</head>
<body>
  <h1>ü§ñ KTM AI T√†i X·ªâu - Edward Thorp Style</h1><label>üìå Nh·∫≠p m√£ MD5:</label>

  <textarea id="md5" rows="2" placeholder="d√°n m√£ MD5 v√†o ƒë√¢y..."></textarea><button onclick="analyzeMD5()">üîç Ph√¢n t√≠ch</button>

<label>üì∑ Nh·∫≠n ·∫£nh k·∫øt qu·∫£:</label> <input type="file" accept="image/*" onchange="handleImage(this)">

  <div class="result" id="suggestion">üí° G·ª£i √Ω AI s·∫Ω hi·ªán t·∫°i ƒë√¢y...</div><label>‚úÖ K·∫øt qu·∫£ ƒë√∫ng l√†:</label> <button onclick="saveResult('T√†i')">T√†i</button> <button onclick="saveResult('X·ªâu')">X·ªâu</button>

  <div class="log" id="history">üß† Nh·∫≠t k√Ω h·ªçc AI:</div><label>üí¨ H·ªèi AI:</label>

  <textarea id="chatInput" placeholder="V√≠ d·ª•: N√™n ƒë√°nh tay n√†o, ƒë·∫∑t bao nhi√™u ti·ªÅn..."></textarea><button onclick="chatWithAI()">üß† Tr·∫£ l·ªùi nh∆∞ Edward Thorp</button>

  <div class="chat" id="chatLog"></div>  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.5/dist/tesseract.min.js"></script>  <script>
    let history = JSON.parse(localStorage.getItem('tx_data') || '[]');

    function extractFeatures(md5) {
      const f = (md5.match(/f/gi) || []).length;
      const d = (md5.match(/d/gi) || []).length;
      const lastChar = md5.trim().slice(-1);
      return { f, d, lastChar };
    }

    function analyzeMD5() {
      const md5 = document.getElementById('md5').value.trim();
      if (!md5 || md5.length < 10) return alert("M√£ kh√¥ng h·ª£p l·ªá!");
      const { f, d, lastChar } = extractFeatures(md5);
      let count = { T√†i: 0, X·ªâu: 0 };
      history.forEach(h => {
        if (h.f === f && h.d === d && h.lastChar === lastChar) count[h.result]++;
      });
      const total = count.T√†i + count.X·ªâu;
      let confidence = total > 0 ? Math.round(100 * Math.max(count.T√†i, count.X·ªâu) / total) : 50;
      let guess = count.T√†i > count.X·ªâu ? 'T√†i' : (count.T√†i < count.X·ªâu ? 'X·ªâu' : 'Kh√¥ng ch·∫Øc ch·∫Øn');
      const ev = (count.T√†i - count.X·ªâu) / (total || 1);
      let msg = `üìä F: ${f}, D: ${d}, Cu·ªëi: ${lastChar}\nüéØ G·ª£i √Ω: ${guess} (${confidence}%)\nüìà EV: ${ev.toFixed(2)}\n`;
      if (confidence < 60 || Math.abs(ev) < 0.1) msg += '‚ö†Ô∏è C·∫£nh b√°o: Kh√¥ng n√™n ch∆°i tay n√†y!';
      document.getElementById('suggestion').innerText = msg;
    }

    function saveResult(result) {
      const md5 = document.getElementById('md5').value.trim();
      if (!md5 || md5.length < 10) return alert("Nh·∫≠p m√£ tr∆∞·ªõc ƒë√£!");
      const { f, d, lastChar } = extractFeatures(md5);
      history.push({ f, d, lastChar, result });
      localStorage.setItem('tx_data', JSON.stringify(history));
      analyzeMD5();
      showHistory();
    }

    function showHistory() {
      const logs = history.slice(-20).map((h,i)=> `${i+1}. F:${h.f}, D:${h.d}, C:${h.lastChar} ‚Üí ${h.result}`).join("\n");
      document.getElementById('history').innerText = logs || 'Ch∆∞a c√≥ d·ªØ li·ªáu.';
    }

    async function handleImage(input) {
      const file = input.files[0];
      if (!file) return;
      const result = await Tesseract.recognize(file, 'eng');
      const text = result.data.text.replace(/\s+/g, '').toLowerCase();
      document.getElementById('md5').value = text.match(/[a-f0-9]{32}/)?.[0] || 'Kh√¥ng t√¨m th·∫•y MD5';
      analyzeMD5();
    }

    function chatWithAI() {
      const input = document.getElementById('chatInput').value.trim();
      if (!input) return;
      const reply = aiReply(input);
      const log = document.getElementById('chatLog');
      log.innerText += `üßë‚Äçüíª B·∫°n: ${input}\nü§ñ AI: ${reply}\n\n`;
    }

    function aiReply(text) {
      if (text.toLowerCase().includes("ƒë·∫∑t bao nhi√™u")) return "√Åp d·ª•ng Kelly: c∆∞·ª£c = v·ªën √ó ((p√ób - q)/b). ∆Ø·ªõc x√°c su·∫•t th·∫Øng p > 0.6 m·ªõi n√™n c∆∞·ª£c.";
      if (text.toLowerCase().includes("n√™n ƒë√°nh")) return "Ch·ªâ ƒë√°nh khi EV > 0, x√°c su·∫•t th·∫Øng cao h∆°n 55%. C·∫ßu ƒëang nhi·ªÖu th√¨ ngh·ªâ.";
      return "Chi·∫øn l∆∞·ª£c t·ªëi ∆∞u l√†: ch·ªâ c∆∞·ª£c khi c√≥ l·ª£i th·∫ø, ki·ªÉm so√°t v·ªën, kh√¥ng ch∆°i c·∫£m t√≠nh, h·ªçc t·ª´ k·∫øt qu·∫£ th·ª±c t·∫ø.";
    }

    showHistory();
  </script></body>
</html>
